{"version":3,"file":"jss-plugin-compose.js","sources":["../../../node_modules/tiny-warning/dist/tiny-warning.esm.js","../src/index.js"],"sourcesContent":["var isProduction = process.env.NODE_ENV === 'production';\nfunction warning(condition, message) {\n  if (!isProduction) {\n    if (condition) {\n      return;\n    }\n\n    var text = \"Warning: \" + message;\n\n    if (typeof console !== 'undefined') {\n      console.warn(text);\n    }\n\n    try {\n      throw Error(text);\n    } catch (x) {}\n  }\n}\n\nexport default warning;\n","// @flow\nimport warning from 'tiny-warning'\nimport type {Plugin, StyleSheet} from 'jss'\n\n/**\n * Set selector.\n *\n * @param {Object} original rule\n * @param {String} className class string\n * @return {Boolean} flag, indicating function was successfull or not\n */\nfunction registerClass(rule, className) {\n  // Skip falsy values\n  if (!className) return true\n\n  // Support array of class names `{composes: ['foo', 'bar']}`\n  if (Array.isArray(className)) {\n    for (let index = 0; index < className.length; index++) {\n      const isSetted = registerClass(rule, className[index])\n      if (!isSetted) return false\n    }\n\n    return true\n  }\n\n  // Support space separated class names `{composes: 'foo bar'}`\n  if (className.indexOf(' ') > -1) {\n    return registerClass(rule, className.split(' '))\n  }\n\n  const {parent} = ((rule.options: any): {parent: StyleSheet})\n\n  // It is a ref to a local rule.\n  if (className[0] === '$') {\n    const refRule = parent.getRule(className.substr(1))\n\n    if (!refRule) {\n      warning(false, `[JSS] Referenced rule is not defined. \\n${rule.toString()}`)\n      return false\n    }\n\n    if (refRule === rule) {\n      warning(false, `[JSS] Cyclic composition detected. \\n${rule.toString()}`)\n      return false\n    }\n\n    parent.classes[rule.key] += ` ${parent.classes[refRule.key]}`\n\n    return true\n  }\n\n  parent.classes[rule.key] += ` ${className}`\n\n  return true\n}\n\n/**\n * Convert compose property to additional class, remove property from original styles.\n *\n * @param {Rule} rule\n * @api public\n */\nexport default function jssCompose(): Plugin {\n  function onProcessStyle(style, rule) {\n    if (!('composes' in style)) return style\n    registerClass(rule, style.composes)\n    // Remove composes property to prevent infinite loop.\n    delete style.composes\n    return style\n  }\n  return {onProcessStyle}\n}\n"],"names":["registerClass","rule","className","Array","isArray","index","length","isSetted","indexOf","split","options","parent","refRule","getRule","substr","warning","toString","classes","key","jssCompose","onProcessStyle","style","composes"],"mappings":";;;;;;EACA,SAAS,OAAO,CAAC,SAAS,EAAE,OAAO,EAAE;EACrC,EAAE,AAAmB;EACrB,IAAI,IAAI,SAAS,EAAE;EACnB,MAAM,OAAO;EACb,KAAK;;EAEL,IAAI,IAAI,IAAI,GAAG,WAAW,GAAG,OAAO,CAAC;;EAErC,IAAI,IAAI,OAAO,OAAO,KAAK,WAAW,EAAE;EACxC,MAAM,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACzB,KAAK;;EAEL,IAAI,IAAI;EACR,MAAM,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC;EACxB,KAAK,CAAC,OAAO,CAAC,EAAE,EAAE;EAClB,GAAG;EACH,CAAC;;ECbD;;;;;;;EAOA,SAASA,aAAT,CAAuBC,IAAvB,EAA6BC,SAA7B,EAAwC;EACtC;EACA,MAAI,CAACA,SAAL,EAAgB,OAAO,IAAP,CAFsB;;EAKtC,MAAIC,KAAK,CAACC,OAAN,CAAcF,SAAd,CAAJ,EAA8B;EAC5B,SAAK,IAAIG,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGH,SAAS,CAACI,MAAtC,EAA8CD,KAAK,EAAnD,EAAuD;EACrD,UAAME,QAAQ,GAAGP,aAAa,CAACC,IAAD,EAAOC,SAAS,CAACG,KAAD,CAAhB,CAA9B;EACA,UAAI,CAACE,QAAL,EAAe,OAAO,KAAP;EAChB;;EAED,WAAO,IAAP;EACD,GAZqC;;;EAetC,MAAIL,SAAS,CAACM,OAAV,CAAkB,GAAlB,IAAyB,CAAC,CAA9B,EAAiC;EAC/B,WAAOR,aAAa,CAACC,IAAD,EAAOC,SAAS,CAACO,KAAV,CAAgB,GAAhB,CAAP,CAApB;EACD;;EAjBqC,aAmBnBR,IAAI,CAACS,OAnBc;EAAA,MAmB/BC,MAnB+B,QAmB/BA,MAnB+B;;EAsBtC,MAAIT,SAAS,CAAC,CAAD,CAAT,KAAiB,GAArB,EAA0B;EACxB,QAAMU,OAAO,GAAGD,MAAM,CAACE,OAAP,CAAeX,SAAS,CAACY,MAAV,CAAiB,CAAjB,CAAf,CAAhB;;EAEA,QAAI,CAACF,OAAL,EAAc;EACZ,MAAAG,OAAO,CAAC,KAAD,+CAAmDd,IAAI,CAACe,QAAL,EAAnD,CAAP;EACA,aAAO,KAAP;EACD;;EAED,QAAIJ,OAAO,KAAKX,IAAhB,EAAsB;EACpB,MAAAc,OAAO,CAAC,KAAD,4CAAgDd,IAAI,CAACe,QAAL,EAAhD,CAAP;EACA,aAAO,KAAP;EACD;;EAEDL,IAAAA,MAAM,CAACM,OAAP,CAAehB,IAAI,CAACiB,GAApB,WAAgCP,MAAM,CAACM,OAAP,CAAeL,OAAO,CAACM,GAAvB,CAAhC;EAEA,WAAO,IAAP;EACD;;EAEDP,EAAAA,MAAM,CAACM,OAAP,CAAehB,IAAI,CAACiB,GAApB,WAAgChB,SAAhC;EAEA,SAAO,IAAP;EACD;EAED;;;;;;;;AAMA,EAAe,SAASiB,UAAT,GAA8B;EAC3C,WAASC,cAAT,CAAwBC,KAAxB,EAA+BpB,IAA/B,EAAqC;EACnC,QAAI,EAAE,cAAcoB,KAAhB,CAAJ,EAA4B,OAAOA,KAAP;EAC5BrB,IAAAA,aAAa,CAACC,IAAD,EAAOoB,KAAK,CAACC,QAAb,CAAb,CAFmC;;EAInC,WAAOD,KAAK,CAACC,QAAb;EACA,WAAOD,KAAP;EACD;;EACD,SAAO;EAACD,IAAAA,cAAc,EAAdA;EAAD,GAAP;EACD;;;;;;;;;;;;"}